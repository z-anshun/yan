### 架构模式：

定义： 架构模式，也叫架构风格，一个架构模式描述软件系统里的基本的结构组织或纲要 。

换句话说： **架构模式描述了一组组件之间的关系，用以解决特定上下文内的某个常见的架构问题** （也就是指定什么实现什么功能，让其更规范）

> The design patterns in this book are descriptions of communicating objects and classes that are customized to solve a general design problem in a particular context.

### 分层架构：

> 定义： 分层结构是指一种自动化代码的结构。这种结构的特点是将复杂的测试代码分成三个单向依赖的层次，采用分层结构构建的测试代码中的测试逻辑变得清晰，容易理解和维护 

> 目的： “高内聚低耦合”

#### 原则：

1.**单向逐层调用**：

上层只能依赖下层，不可依赖其它层

2.**针对接口编程**：

这里的接口是指在语义层面上起接合作用的语义体，每层都会为上一层提供一个接口（换句话说，就是每层都需要封装，只提供一个接口给上一层）

3.**依赖倒置**：

>  在软件设计原则中，有一种重要的思想叫做依赖倒置。它的核心思想是：不能让高层组件依赖底层组件，而且，不管高层组件和底层组件，两者都应依赖于抽象 

> 具体依赖——如果 P 层中有一个或一个以上的地方实例化了 Q 层中某个具体类，则说 P 层具体依赖于 Q 层。
>
> 抽象依赖——如果 P 层没有实例化 Q 层中的具体类，而是在一个或一个以上的地方实例化了 Q 层中某个接口，则说 P 层抽象依赖于 Q 层，也叫接口依赖于 Q层

换句话说：上一层只能依赖下面那层提供的接口

4.**封装变化**：减少变化对系统其它组成部分的影响  

5.**单一职责**

6.**开放封闭**：对外展开，对内修改封闭

> 更多：https://blog.csdn.net/bboyfeiyu/article/details/45136299#t1

### 事件驱动架构：

> 定义： 设计和实现一个应用系统的方法学 

> 目的：异步的接收和处理事件

> 事件的定义： 事件就是状态的显著变化，比如客户下单被执行 

事件驱动包括了两个主要的拓扑结构 ，分别是：

#### 调停者(Mediator)拓扑：

>  主要有4个主要的架构组件组成：事件队列（Event Queue）、调停者（Mediator）、事件通道（Event Channel）和事件处理器（Event Processor）    客户端创建事件，并将其发送到**事件队列**，**调停者**接收事件并将其传递给**事件通道**。事件通道将事件传递给**事件处理器**，事件最终由事件处理器处理完成 

**适用于**： 适合那些有很多步骤需要处理，并且需要按照某种程度的编排来处理的事件 

**举例**：一个处理股票交易的事件首先需要你首先验证交易的本身合法性，然后检查这个股票交易是否合规，然后把股票交给股票代理商，计算佣金，然后通过代理商将股票移送给客户。这些步骤都需要一个**编排中心**来决定这些步骤的**顺序**，并且**决定**哪些能是**串行的**，哪些是**并行的**

****

####  代理者(Broker)拓扑：

>  不像调停者拓扑，代理者拓扑不使用任何集中的编排，而是在事件处理器之间使用简单的队列或者集线器，事件处理器知道处理事件的下一个事件处理器 

换句话说：就是简单的消息传递。一层一层

事件驱动架构的敏捷性高（ 事件和事件处理器之间解耦，并且可独立维护 ），易于部署，性能就好（异步工作），可伸缩性高（ 组件之间解耦，组件可以独立扩展 ），但难开发，端对端测试较难（虽然独立测试组件容易）

### 微内核架构：

> 定义： 也被成为插件化架构（Plug-in Architecture）,是一种面向功能进行拆分的可扩展性架构 

> 微内核架构包含两类组件：**核心系统**（core system）和**插件模块**（plug-in modules）。核心系统负责和具体业务功能无关的通用功能，例如模块加载、模块间通信等；插件模块负责实现具体的业务逻辑 

> 目的： 将变化封装在插件里面，从而达到**快速灵活扩展**的目的，而又不影响整体系统的稳定 

补充：

相关概念：

> **操作系统**（Operation System，简称OS）:是**管理计**算机硬件与软件资源的程序，是计算机系统的**内核与基石**；
>
> **内核**:内核建立了计算机软件与硬件之间**通讯的平台**，内核提供系统服务，比如文件管理、虚拟内存、设备I/O等
>
> **微内核**:内核的一种**精简形式**。将通常与内核集成在一起的系统服务层被分离出来，变成可以根据需求加入选件，这样就可提供更好的可扩展性和更加有效的应用环境。使用微内核设计，对系统进行升级，只要用新模块替换旧模块，**不需要改变整个操作系统**（相当于微内核将一些功能给独立了出来）
>
> ------
>
> **内聚**：从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。它描述的是模块内的功能联系； 
>
> **耦合**：软件结构中各模块之间**相互连接的一种度量**，**一种尺度**，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块的点以及通过接口的数据。
>
> **耦合性**：也称块间联系。指软件系统结构中各模块间相互联系紧密程度的一种度量。模块之间联系越紧密，其耦合性就越强，模块的独立性则越差。模块间耦合高低取决于模块间接口的复杂性、调用的方式及传递的信息 （ 如果耦合很强，互相牵扯调用很多，那么会牵一发而动全身，不利于维护和扩展 ）
>
> **高内聚**:类与类之间的关系而定，高，意思是他们之间的关系要简单，明了，不要有很强的关系，不然，运行起来就会出问题。一个类的运行影响到其他的类。
>
> **低偶合**：类内部的方法而言。把程序的功能尽量分散，别在一个类里只写一个或很好的方法，因为那样会给你的调试等带来很多问题。出了错你都不知道在什么地方。  
>
>  

 **“高内聚，低耦合”**主要是阐述的面向对象系统中，各个类需要职责分离的思想 

**架构设计的目的简单说**就是在保持软件内在联系的前提下，**分解软件系统**，**降低**软件系统开发的**复杂性**，而分解软件系统的基本方法无外乎就是分层和分割 